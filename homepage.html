<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>YM Meals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="homepage-styles.css" />
  </head>
  <body>
    <!-- Left Navigation -->
    <nav class="left-nav" role="navigation" aria-label="Main navigation">
      <button
        class="nav-btn active"
        onclick="goToPage('homepage.html')"
        title="Home"
        type="button"
        id="nav-home"
      >
        <i class="fas fa-home"></i>
      </button>
      <button
        class="nav-btn"
        onclick="goToPage('profile.html')"
        title="Profile"
        type="button"
        id="nav-profile"
      >
        <i class="fas fa-user"></i>
      </button>
      <button
        class="nav-btn"
        onclick="toggleFriendsPanel()"
        title="Friends"
        type="button"
        id="nav-friends"
      >
        <i class="fas fa-globe"></i>
        <span class="friend-request-badge" id="friendRequestBadge">3</span>
      </button>
      <button
        class="nav-btn"
        onclick="toggleNotificationsPanel()"
        title="Notifications"
        type="button"
        id="nav-notifications"
      >
        <i class="fas fa-bell"></i>
        <span class="notification-badge" id="notificationBadge">6</span>
      </button>
    </nav>

    <!-- Friends Panel -->
    <div class="friends-panel" id="friendsPanel">
      <div class="friends-header">
        <h3>Friends</h3>
      </div>
      <div class="friends-search">
        <input
          type="text"
          placeholder="Search friends..."
          id="friendSearchInput"
        />
        <button class="search-btn" onclick="searchFriends()">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div class="friends-tabs">
        <button class="tab-btn active" data-tab="friendsList">Friends</button>
        <button class="tab-btn" data-tab="friendRequests">
          Requests <span class="request-count">3</span>
        </button>
      </div>
      <div class="friends-content" id="friendsContent">
        <!-- Content will be populated by JavaScript -->
      </div>
    </div>

    <!-- Notifications Panel -->
    <div class="notifications-panel" id="notificationsPanel">
      <div class="notifications-header">
        <h3>Notifications</h3>
      </div>
      <div class="notifications-content" id="notificationsContent">
        <!-- Powiadomienia będą dodawane przez JavaScript -->
      </div>
    </div>

    <!-- Top bar with logo and logout -->
    <header class="flex justify-center relative py-4">
      <img
        src="/pictures/logo.png"
        alt="YM University logo black text on transparent background"
        class="logo-img"
        role="img"
        aria-label="YM University logo"
        tabindex="0"
        onclick="goToPage('homepage.html')"
      />
      <button
        class="logout-btn"
        type="button"
        onclick="goToPage('info.html')"
        aria-label="Log out"
      >
        Log out
      </button>
    </header>

    <!-- Main content -->
    <main class="flex flex-col items-center px-6">
      <h1
        aria-label="Welcome Back, XYZ!"
        class="handwriting text-black mt-6 mb-1 select-none"
      >
        Welcome Back, XYZ!
      </h1>
      <time
        aria-live="polite"
        id="current-time"
        class="current-time"
        aria-label="Current time"
      >
        00:00:00
      </time>

      <section aria-label="Lunch time prompt" class="lunch-container">
        <p class="lunch-time-text">Lunch time</p>
        <div class="flex items-center">
          <button
            aria-label="Edit what's on your plate today"
            class="pen-button"
            type="button"
            onclick="openAddPostPanel()"
          >
            <i class="fas fa-pen pen-icon"></i>
          </button>
          <p class="plate-text">What's on Your Plate Today?</p>
        </div>
      </section>

      <section class="w-full max-w-6xl">
        <h2 class="recent-friends-title">Recent friends' meals</h2>
        <div class="recent-friends-cards">
          <!-- Card 1 -->
          <article class="max-w-[220px]">
            <div class="gallery-image-container">
              <img
                alt="Sandwich cut in half on white plate on a light surface"
                src="/pictures/pic-hp-gallery-1.jpg"
                loading="lazy"
              />
              <button
                aria-label="Previous meal"
                class="gallery-arrow left"
                type="button"
                onclick="changeImage(0, -1)"
              >
                <i class="fas fa-chevron-left"></i>
              </button>
              <button
                aria-label="Next meal"
                class="gallery-arrow right"
                type="button"
                onclick="changeImage(0, 1)"
              >
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="flex items-center mt-2 justify-end">
              <div class="flex space-x-3 text-[12px] text-black">
                <button
                  aria-label="Comment on meal xyz1"
                  class="comment-btn"
                  type="button"
                  onclick="toggleComments(0)"
                >
                  <i class="fas fa-comment"></i>
                  <span class="comment-count">3</span>
                </button>
                <button
                  aria-label="Like meal xyz1"
                  class="like-btn"
                  type="button"
                  onclick="toggleLike(this)"
                >
                  <i class="fas fa-heart"></i>
                  <span class="like-count">12</span>
                </button>
              </div>
            </div>
            <div class="avatar-username mt-3">
              <img
                alt="Avatar image of user xyz1"
                class="w-5 h-5 object-cover border border-black"
                height="20"
                src="/pictures//hp-prof-1.jpg"
                width="20"
              />
              <p class="text-[10px] font-sans select-none">funycat123</p>
            </div>
            <p
              class="text-[8px] mt-1 font-sans text-black/70 leading-tight select-none"
            >
              my sandwiches look so nice!!! white cheese and cucumbers hihi
            </p>
          </article>

          <!-- Card 2 -->
          <article class="max-w-[220px]">
            <div class="gallery-image-container">
              <img
                alt="Dumplings in a bowl with greens"
                src="/pictures/pic-hp-gallery-2.jpg"
                loading="lazy"
              />
              <button
                aria-label="Previous meal"
                class="gallery-arrow left"
                type="button"
                onclick="changeImage(1, -1)"
              >
                <i class="fas fa-chevron-left"></i>
              </button>
              <button
                aria-label="Next meal"
                class="gallery-arrow right"
                type="button"
                onclick="changeImage(1, 1)"
              >
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="flex items-center mt-2 justify-end">
              <div class="flex space-x-3 text-[12px] text-black">
                <button
                  aria-label="Comment on meal xyz2"
                  class="comment-btn"
                  type="button"
                  onclick="toggleComments(1)"
                >
                  <i class="fas fa-comment"></i>
                  <span class="comment-count">5</span>
                </button>
                <button
                  aria-label="Like meal xyz2"
                  class="like-btn"
                  type="button"
                  onclick="toggleLike(this)"
                >
                  <i class="fas fa-heart"></i>
                  <span class="like-count">8</span>
                </button>
              </div>
            </div>
            <div class="avatar-username mt-3">
              <img
                alt="Avatar image of user xyz2"
                class="w-5 h-5 object-cover border border-black"
                height="20"
                src="/pictures/hp-prof-2.jpg"
                width="20"
              />
              <p class="text-[10px] font-sans select-none">yumyum8</p>
            </div>
            <p
              class="text-[8px] mt-1 font-sans text-black/70 leading-tight select-none"
            >
              how do you like my lunch GUYSSSSSS hello
            </p>
          </article>

          <!-- Card 3 -->
          <article class="max-w-[220px]">
            <div class="gallery-image-container">
              <img
                alt="Tofu and greens in a bowl"
                src="/pictures/pic-hp-gallery-3.jpg"
                loading="lazy"
              />
              <button
                aria-label="Previous meal"
                class="gallery-arrow left"
                type="button"
                onclick="changeImage(2, -1)"
              >
                <i class="fas fa-chevron-left"></i>
              </button>
              <button
                aria-label="Next meal"
                class="gallery-arrow right"
                type="button"
                onclick="changeImage(2, 1)"
              >
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="flex items-center mt-2 justify-end">
              <div class="flex space-x-3 text-[12px] text-black">
                <button
                  aria-label="Comment on meal xyz3"
                  class="comment-btn"
                  type="button"
                  onclick="toggleComments(2)"
                >
                  <i class="fas fa-comment"></i>
                  <span class="comment-count">2</span>
                </button>
                <button
                  aria-label="Like meal xyz3"
                  class="like-btn"
                  type="button"
                  onclick="toggleLike(this)"
                >
                  <i class="fas fa-heart"></i>
                  <span class="like-count">15</span>
                </button>
              </div>
            </div>
            <div class="avatar-username mt-3">
              <img
                alt="Avatar image of user xyz3"
                class="w-5 h-5 object-cover border border-black"
                height="20"
                src="/pictures/hp-prof-1.jpg"
                width="20"
              />
              <p class="text-[10px] font-sans select-none">ilikefood1</p>
            </div>
            <p
              class="text-[8px] mt-1 font-sans text-black/70 leading-tight select-none"
            >
              i couldnt wait for break! i was so hungry, what did YOU eat for
              lunch btw? ill enjoy it now
            </p>
          </article>
        </div>
      </section>
    </main>

    <footer class="page-footer">
      <a class="footer-link" href="#">ABOUT US</a>
      <div class="copyright">
        <span>©</span>
        <span class="footer-yumunity pecita-font">YumUnity</span>
        <span>All right reserved.</span>
      </div>
      <div class="social-links">
        <a aria-label="Facebook" class="social-link" href="#"
          ><i class="fab fa-facebook-f"></i
        ></a>
        <a aria-label="Instagram" class="social-link" href="#"
          ><i class="fab fa-instagram"></i
        ></a>
        <a aria-label="Twitter" class="social-link" href="#"
          ><i class="fab fa-twitter"></i
        ></a>
      </div>
    </footer>

    <!-- Add New Meal Panel -->
    <div class="add-post-panel" id="addPostPanel">
      <h3>Add New Meal</h3>
      <form class="auth-form" id="addPostForm">
        <div class="form-group">
          <label for="mealTypeSelect">Meal Type:</label>
          <div class="meal-type-options">
            <select id="mealTypeSelect" class="meal-type-select">
              <option value="breakfast">Breakfast</option>
              <option value="lunch">Lunch</option>
              <option value="dinner">Dinner</option>
              <option value="snack">Snack</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <textarea
            id="mealDescription"
            placeholder="Tell us about your meal..."
            rows="3"
            maxlength="200"
          ></textarea>
          <div class="description-footer">
            <label for="mealDescription">Description:</label>
            <span class="char-count"><span id="charCount">0</span>/200</span>
          </div>
        </div>

        <div class="form-group">
          <label for="caloriesInput">Calories:</label>
          <input
            type="number"
            id="caloriesInput"
            placeholder="Enter calories"
            min="0"
          />
        </div>

        <div class="form-group">
          <input
            type="file"
            id="mealImageInput"
            name="mealImage"
            accept="image/*"
            style="display: none"
            multiple
          />
          <button
            type="button"
            class="auth-button"
            onclick="document.getElementById('mealImageInput').click()"
          >
            Add Photos
          </button>
          <div id="imagePreviewContainer" class="image-preview-container"></div>
        </div>

        <div class="form-actions">
          <button type="submit" class="auth-button" id="postButton">
            Post Meal
          </button>
        </div>
      </form>
      <button class="auth-button cancel-button" onclick="closeAddPostPanel()">
        Cancel
      </button>
    </div>

    <script src="homepage-script.js"></script>
  </body>
</html>
